(this["webpackJsonpcode-test"]=this["webpackJsonpcode-test"]||[]).push([[0],{13:function(e,t,n){e.exports=n(23)},18:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(4),l=n.n(a),c=(n(18),n(11)),i=n(12),s=n(2),u=n(8),d=n(9),f=n.n(d),v=s.v.model("Box",{id:s.v.identifier,width:200,height:100,color:"#FFF000",left:200,top:100,selected:!1}).views((function(e){return{get position(){return{left:e.left,top:e.top}}}})).actions((function(e){return{move:function(t,n){e.left+=t,e.top+=n},setPosition:function(t,n){e.left=t,e.top=n},setColor:function(t){e.color=t},toggleSelection:function(){e.selected=!e.selected},select:function(){e.selected=!0},deselect:function(){e.selected=!1}}})),g=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},p=s.v.model("MainStore",{boxes:s.v.array(v),selectedBoxIds:s.v.array(s.v.string),undoManager:s.v.optional(u.a,{})}).views((function(e){return{get selectedBoxes(){return e.boxes.filter((function(t){return e.selectedBoxIds.includes(t.id)}))},get selectedCount(){return e.selectedBoxIds.length},getBoxById:function(t){return e.boxes.find((function(e){return e.id===t}))}}})).actions((function(e){var t={},n={},r=function(t){var n=e.boxes.findIndex((function(e){return e.id===t}));-1!==n&&e.boxes.splice(n,1);var r=e.selectedBoxIds.indexOf(t);-1!==r&&e.selectedBoxIds.splice(r,1)},o=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getBoxById(t);r&&(n||l(),e.selectedBoxIds.includes(t)||e.selectedBoxIds.push(t))},a=function(t){var n=e.selectedBoxIds.indexOf(t);-1!==n&&e.selectedBoxIds.splice(n,1)},l=function(){e.selectedBoxIds.splice(0,e.selectedBoxIds.length)};return{afterCreate:function(){t=Object(s.m)(e);var n=localStorage.getItem("canvasState");if(n)try{Object(s.e)(e,JSON.parse(n))}catch(r){console.error("Failed to load saved state",r)}Object(s.s)(e,(function(e){try{var t=Object(i.a)({},e);t.boxes.length>20&&(t.boxes=t.boxes.slice(-20)),localStorage.setItem("canvasState",JSON.stringify(t))}catch(r){console.error("Failed to save state",r);try{localStorage.removeItem("canvasState")}catch(n){console.error("Failed to clear localStorage",n)}}}))},createBox:function(){var t=v.create({id:f()(),color:g(),left:800*Math.random(),top:400*Math.random()});return e.addBox(t),t},addBox:function(t){e.boxes.push(t)},removeBox:r,removeSelectedBoxes:function(){Object(c.a)(e.selectedBoxIds).forEach((function(e){r(e)}))},selectBox:o,deselectBox:a,toggleBoxSelection:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.selectedBoxIds.includes(t)?a(t):o(t,n)},clearSelection:l,setColorToSelected:function(t){e.selectedBoxes.forEach((function(e){e.setColor(t)}))},reset:function(){Object(s.e)(e,t)},startDrag:function(){n={},e.selectedBoxes.forEach((function(e){n[e.id]={left:e.left,top:e.top}}))},dragMove:function(t,n,r){var o=e.getBoxById(t);o&&(e.selectedBoxIds.includes(t)?e.selectedBoxes.forEach((function(e){e.move(n,r)})):o.move(n,r))},endDrag:function(){if(Object.keys(n).length>0){var t={};Object.keys(n).forEach((function(n){var r=e.getBoxById(n);r&&(t[n]={left:r.left,top:r.top})}));var r=!1;Object.keys(n).forEach((function(e){var o=n[e],a=t[e];!a||o.left===a.left&&o.top===a.top||(r=!0)})),r&&(e.undoManager.withoutUndo((function(){Object.keys(n).forEach((function(t){var r=e.getBoxById(t);if(r){var o=n[t],a=o.left,l=o.top;r.setPosition(a,l)}}))})),Object.keys(t).forEach((function(n){var r=e.getBoxById(n);if(r){var o=t[n],a=o.left,l=o.top;r.setPosition(a,l)}}))),n={}}}}})).create({boxes:[],selectedBoxIds:[]}),m=n(3),h=n(10),b=n.n(h);var y=Object(m.a)((function(e){var t=Object(r.useRef)(null),n=e.box,a=p.selectedBoxIds.includes(n.id);return Object(r.useEffect)((function(){var e=function(e){(8===e.keyCode||"Backspace"===e.key)&&p.selectedCount>0&&(p.removeSelectedBoxes(),e.preventDefault())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Object(r.useEffect)((function(){var e=t.current;if(e){var r=b()(e).draggable({inertia:!1,modifiers:[],autoScroll:!0,listeners:{start:function(e){var t=!!e.originalEvent&&e.originalEvent.shiftKey;p.selectedBoxIds.includes(n.id)||p.selectBox(n.id,t),p.startDrag()},move:function(e){var t=e.dx,r=e.dy;p.dragMove(n.id,t,r)},end:function(){p.endDrag()}}});return function(){r&&r.unset()}}}),[n.id]),o.a.createElement("div",{ref:t,id:e.id,className:"box ".concat(a?"selected":""),style:{backgroundColor:e.color,width:e.width,height:e.height,transform:"translate(".concat(e.left,"px, ").concat(e.top,"px)"),boxSizing:"border-box"},onClick:function(e){e.stopPropagation(),p.toggleBoxSelection(n.id,e.shiftKey)}},e.children)}));var x=Object(m.a)((function(e){return o.a.createElement(y,e)}));var O=Object(m.a)((function(e){var t=e.store;return o.a.createElement("div",{className:"canva",onClick:function(e){e.target===e.currentTarget&&t.clearSelection()}},t.boxes.map((function(e){return o.a.createElement(x,{id:e.id,key:e.id,color:e.color,left:e.left,top:e.top,width:e.width,height:e.height,box:e})})))}));function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=o.a.createElement("g",null,o.a.createElement("path",{d:"M6,3V0L0,4,6,8V5H9a4,4,0,0,1,4,4v5a1,1,0,0,0,2,0V9A6,6,0,0,0,9,3Z"})),j=function(e){var t=e.svgRef,n=e.title,r=B(e,["svgRef","title"]);return o.a.createElement("svg",E({fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16",style:{verticalAlign:"middle"},ref:t},r),n?o.a.createElement("title",null,n):null,w)},I=o.a.forwardRef((function(e,t){return o.a.createElement(j,E({svgRef:t},e))}));n.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var C=o.a.createElement("g",null,o.a.createElement("path",{d:"M10,3V0l6,4L10,8V5H7A4,4,0,0,0,3,9v5a1,1,0,0,1-2,0V9A6,6,0,0,1,7,3Z"})),k=function(e){var t=e.svgRef,n=e.title,r=S(e,["svgRef","title"]);return o.a.createElement("svg",M({fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16",style:{verticalAlign:"middle"},ref:t},r),n?o.a.createElement("title",null,n):null,C)},R=o.a.forwardRef((function(e,t){return o.a.createElement(k,M({svgRef:t},e))}));n.p;var A=Object(m.a)((function(){return o.a.createElement("div",{className:"toolbar"},o.a.createElement("button",{onClick:function(){p.undoManager.undo()},disabled:!p.undoManager.canUndo},o.a.createElement(I,null)),o.a.createElement("button",{onClick:function(){p.undoManager.redo()},disabled:!p.undoManager.canRedo},o.a.createElement(R,null)),o.a.createElement("span",{className:"separator"}),0!==p.selectedCount&&o.a.createElement("span",{className:"".concat(0!==p.selectedCount?"show":"")},p.selectedCount," ",1===p.selectedCount?"box":"boxes"," ","selected"))}));function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var V=o.a.createElement("g",null,o.a.createElement("path",{d:"M12,9H9v3a1,1,0,0,1-2,0V9H4A1,1,0,0,1,4,7H7V4A1,1,0,0,1,9,4V7h3a1,1,0,0,1,0,2M8,0a8,8,0,1,0,8,8A8,8,0,0,0,8,0"})),F=function(e){var t=e.svgRef,n=e.title,r=N(e,["svgRef","title"]);return o.a.createElement("svg",P({fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16","data-cy":"addPageIcon",style:{verticalAlign:"middle",color:"rgb(18, 18, 18)"},ref:t},r),n?o.a.createElement("title",null,n):null,V)},H=o.a.forwardRef((function(e,t){return o.a.createElement(F,P({svgRef:t},e))}));n.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var J=o.a.createElement("g",null,o.a.createElement("path",{d:"M15,2a1,1,0,0,1,0,2H1A1,1,0,0,1,1,2H4V1A1,1,0,0,1,5,0h6a1,1,0,0,1,1,1V2ZM2,14.18V6H14v8.18A1.92,1.92,0,0,1,12,16H4A1.92,1.92,0,0,1,2,14.18Z"})),L=function(e){var t=e.svgRef,n=e.title,r=Y(e,["svgRef","title"]);return o.a.createElement("svg",D({fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16","data-cy":"deletePageFooter",style:{verticalAlign:"middle"},ref:t},r),n?o.a.createElement("title",null,n):null,J)},Z=o.a.forwardRef((function(e,t){return o.a.createElement(L,D({svgRef:t},e))}));n.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var U=o.a.createElement("g",null,o.a.createElement("path",{d:"M12,10a2,2,0,1,1,2-2,2,2,0,0,1-2,2M8,14a1,1,0,1,1,1-1,1,1,0,0,1-1,1M4,12a1,1,0,1,1,1-1,1,1,0,0,1-1,1M2,7A1,1,0,1,1,3,8,1,1,0,0,1,2,7M12,4C9.55,4,9.34,5,8,5A1,1,0,0,1,7,4c0-.82,1-.73,1-2A2,2,0,0,0,6,0C3,0,0,3.58,0,8A8,8,0,0,0,16,8a4,4,0,0,0-4-4"})),K=function(e){var t=e.svgRef,n=e.title,r=T(e,["svgRef","title"]);return o.a.createElement("svg",z({fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16","data-cy":"colorPaletteIcon",style:{verticalAlign:"middle"},ref:t},r),n?o.a.createElement("title",null,n):null,U)},W=o.a.forwardRef((function(e,t){return o.a.createElement(K,z({svgRef:t},e))}));n.p;var G=Object(m.a)((function(){var e=1===p.selectedCount?p.selectedBoxes[0].color:"#000000";return o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"btn"},o.a.createElement("button",{onClick:function(){p.createBox()}},o.a.createElement(H,null)," Add"),o.a.createElement("span",{className:"separator"}),o.a.createElement("button",{onClick:function(){p.removeSelectedBoxes()},disabled:0===p.selectedCount},o.a.createElement(Z,null))),o.a.createElement("div",{className:"btn"},o.a.createElement(W,null),o.a.createElement("input",{type:"color",onChange:function(e){p.setColorToSelected(e.target.value)},disabled:0===p.selectedCount,value:e})))}));var $=Object(m.a)((function(){return console.log("%c\xa1Gracias por revisar este proyecto! \ud83d\ude0a","background: linear-gradient(60deg, #01D0E2 0%, #F6D302 100%);\n  color: white;\n  display: block;\n  line-height: 25px;\n  height: 25px;\n  padding: 5px;"),o.a.createElement("div",{className:"app"},o.a.createElement(A,null),o.a.createElement(O,{store:p}),o.a.createElement(G,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));try{p.afterCreate()}catch(q){console.error("Error initializing store:",q);try{localStorage.removeItem("canvasState"),p.afterCreate()}catch(Q){console.error("Failed to recover from initialization error:",Q)}}p.undoManager.targetStore=p,p.undoManager.withoutUndo((function(){})),l.a.render(o.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.080dd7b0.chunk.js.map